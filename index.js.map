{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/handle-errors.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// renderowanie elementów na stronie\nimport { loadMoreButtonVisible } from '../main.js';\n\nexport default function renderImages(images) {\n  const container = document.getElementById('images-container');\n  images.forEach(image => {\n    // console.log(image);\n\n    const a = document.createElement('a'); // <a></a>\n    a.href = image.largeImageURL;\n    a.classList.add('gallery-item');\n\n    const div = document.createElement('div'); //<a> <div></div> </a>\n    div.className = 'gallery-item-wrapper';\n    a.appendChild(div);\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags || 'Image';\n    img.classList.add('gallery-image');\n    div.appendChild(img); // <a> <div> <img></img> </div> </a>\n\n    const divInfo = document.createElement('div');\n    divInfo.classList.add('gallery-item-info');\n\n    // tworzę 4x div dla statystyk obrazu\n    //tworzę tablicę z nazwami opisów\n    const stats = ['Likes', 'Views', 'Comments', 'Downloads'];\n    //tworzę tablicę z nazwami kluczy w obiekcie\n    const keys = ['likes', 'views', 'comments', 'downloads'];\n\n    //pętla, która tworzy 4x divy, w każdym div nazwa oraz wartość w <span>\n    for (let i = 0; i < 4; i++) {\n      const divStat = document.createElement('div');\n      divStat.classList.add('gallery-item-info-element');\n\n      const spanName = document.createElement('span');\n      spanName.textContent = stats[i];\n      spanName.classList.add('gallery-item-info-element-name');\n\n      const spanValue = document.createElement('span');\n      spanValue.textContent = image[keys[i]];\n      spanValue.classList.add('gallery-item-info-element-value');\n\n      divStat.appendChild(spanName);\n      divStat.appendChild(spanValue);\n      divInfo.appendChild(divStat);\n    }\n\n    div.appendChild(divInfo); // <a> <div> <img></img> <div> stats </div> </div> </a>\n\n    // dodaj do kontenera\n    container.appendChild(a);\n  });\n\n  //after rendering images show load more button\n  loadMoreButtonVisible(true);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport default function handleFetchError(error) {\n  if (error.response) {\n    // Błąd odpowiedzi serwera\n    if (error.response.status === 401) {\n      iziToast.error({\n        title: 'Unauthorized',\n        message: 'Invalid API key. Please check your credentials.',\n        position: 'topCenter',\n      });\n    } else if (error.response.status === 500) {\n      iziToast.error({\n        title: 'Server Error',\n        message: 'Server is currently unavailable. Please try again later.',\n        position: 'topCenter',\n      });\n    } else {\n      iziToast.error({\n        title: 'Error',\n        message: `An error occurred: ${error.response.statusText}`,\n        position: 'topCenter',\n      });\n    }\n  } else if (error.request) {\n    // Brak odpowiedzi od serwera\n    iziToast.error({\n      title: 'Network Error',\n      message:\n        'No response from server. Please check your internet connection.',\n      position: 'topCenter',\n    });\n  } else {\n    // Błąd związany z ustawieniami zapytania\n    iziToast.error({\n      title: 'Error',\n      message: `An error occurred while setting up the request: ${error.message}`,\n      position: 'topCenter',\n    });\n  }\n  console.error('Error fetching images:', error);\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport NProgress from 'nprogress';\nimport 'nprogress/nprogress.css';\nimport { lightbox } from '../main.js';\nimport { loadMoreButtonVisible } from '../main.js';\nimport renderImages from './render-functions.js';\nimport handleFetchError from './handle-errors.js';\n\nexport let totalImages = 0;\n\n//configure NProgress options\nNProgress.configure({\n  showSpinner: true,\n  trickleSpeed: 500,\n});\n\n//fetch images from Pixabay API with Axios\nexport default async function fetchPixabayImages(\n  query,\n  page,\n  clearImages = true,\n  totalShowed = false\n) {\n  const PIXABAY_API_URL = 'https://pixabay.com/api/';\n  const PIXABAY_API_KEY = import.meta.env.VITE_PIXABAY_API_KEY;\n  NProgress.start();\n\n  try {\n    const response = await axios.get(PIXABAY_API_URL, {\n      params: {\n        key: PIXABAY_API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safeSearch: true,\n        per_page: 15,\n        page: page,\n      },\n    });\n\n    const responseData = response.data;\n\n    if (page == 1) {\n      totalImages = responseData.totalHits;\n    }\n\n    if (responseData.total == 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'No images found. Try another query.',\n        position: 'topCenter',\n      });\n      return;\n    }\n    //if responseData.total > 0: clear images container and render images\n    const imagesContainer = document.getElementById('images-container');\n    // Check if images container exists\n    if (!imagesContainer) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Images container not found in the document.',\n        position: 'topCenter',\n      });\n      NProgress.done();\n      return;\n    }\n    // Clear images container if clearImages is true\n    if (clearImages) {\n      imagesContainer.innerHTML = '';\n    }\n    // Render images\n    renderImages(responseData.hits);\n    scrollDown();\n    if (totalShowed) {\n      iziToast.info({\n        title: 'Info',\n        message: `Total images found: ${totalImages}`,\n        position: 'topCenter',\n        timeout: 5000,\n      });\n      loadMoreButtonVisible(false, true); //zostawia widoczny przycisk scroll up\n    }\n\n    // Refresh SimpleLightbox - neccessary after adding new images\n    lightbox.refresh();\n  } catch (error) {\n    handleFetchError(error); //function from handle-errors.js\n  } finally {\n    NProgress.done(); //finish NProgress visual effect - bar on top of the page\n  }\n}\n\nconst scrollDown = () => {\n  window.scrollTo({\n    top: document.body.scrollHeight,\n    left: 0,\n    behavior: 'smooth',\n  });\n};\n","import fetchPixabayImages from './js/pixabay-api.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport { totalImages } from './js/pixabay-api.js';\nexport let page = 1;\nlet textToSearch = '';\n\n// Funkcja inicjująca SimpleLightbox\nexport let lightbox; //zasięg globalny\n\nfunction initializeLightbox() {\n  lightbox = new SimpleLightbox('#images-container a', {\n    /* Opcje konfiguracyjne */\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\ninitializeLightbox();\n\nconst form = document.querySelector('form');\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n\n  // funkcja odczytu danych z api\n  textToSearch = form.querySelector('input').value.trim();\n  if (textToSearch === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please fill out the form field.',\n      position: 'topCenter',\n      timeout: 2000,\n    });\n    loadMoreButtonVisible(false);\n    clearGallery(); //czyszczenie galerii\n    return;\n  }\n  // funkcja odczytu danych z api pixabay\n  page = 1; //after new search reset page number\n  fetchPixabayImages(textToSearch, page);\n  //delete input value\n  form.querySelector('input').value = '';\n});\n\nexport function loadMoreButtonVisible(visible, topVisible = false) {\n  const button = document.querySelector('#load-more');\n  const buttonUp = document.querySelector('#to-top');\n  if (visible == true) {\n    button.classList.remove('hidden');\n    buttonUp.classList.remove('hidden');\n  } else {\n    button.classList.add('hidden'); // Ukrywa przycisk\n    if (topVisible == true) {\n      buttonUp.classList.remove('hidden'); // pokazuje przycisk\n    } else {\n      buttonUp.classList.add('hidden'); // Ukrywa przycisk\n    }\n  }\n}\n\n// loadmore - button event listener\nconst loadMoreButton = document.getElementById('load-more');\nloadMoreButton.addEventListener('click', () => {\n  page += 1;\n  console.log('page:', page);\n  console.log('totalImages:', totalImages);\n  if (page * 15 > totalImages) {\n    fetchPixabayImages(textToSearch, page, false, true);\n  } else {\n    fetchPixabayImages(textToSearch, page, false);\n  }\n});\n\nconst clearGallery = () => {\n  console.log('clearing gallery111');\n  const imagesContainer = document.getElementById('images-container');\n  if (imagesContainer) {\n    console.log('clearing gallery');\n    imagesContainer.innerHTML = '';\n  }\n};\n\nconst scrollUp = () => {\n  window.scrollTo({\n    top: 0,\n    left: 0,\n    behavior: 'smooth',\n  });\n};\n\n// button id=\"to-top\" listener\nconst buttonUp = document.getElementById('to-top');\nbuttonUp.addEventListener('click', () => {\n  scrollUp();\n});\n"],"names":["renderImages","images","container","image","a","div","img","divInfo","stats","keys","i","divStat","spanName","spanValue","loadMoreButtonVisible","handleFetchError","error","iziToast","totalImages","NProgress","fetchPixabayImages","query","page","clearImages","totalShowed","PIXABAY_API_URL","PIXABAY_API_KEY","responseData","axios","imagesContainer","scrollDown","lightbox","textToSearch","initializeLightbox","SimpleLightbox","form","event","clearGallery","visible","topVisible","button","buttonUp","loadMoreButton","scrollUp"],"mappings":"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"}